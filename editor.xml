
<scene>
  <spawn position="0 0 5" />
  <!--box position="0 0.5 0" style="color: #f0a" /-->

  <floor />

  <script>
    console.log(document.scene.getAttribute('version'))
    
    var v = document.getElementById('voxel')

    v.addEventListener('floor', function (e) {
      if (e.button === 2) {
        var p = e.point.sub(v.position).ceil().add(e.normal)
        v.setBlock(p.add(new Vector(16, 16, 16)), 3)
      }
    })

    v.addEventListener('click', function (e) {
      var p = e.point.sub(v.position).ceil().add(e.normal)
      v.setBlock(p.add(new Vector(16, 16, 16)), 2)

<!--       if (e.button === 2) {
        var p = e.point.sub(v.position).ceil().add(e.normal)
        v.setBlock(p.add(new Vector(16, 16, 16)), 2)
      } else {
        // fixme 1,1,1 hack
        var p = e.point.sub(v.position).floor().sub(e.normal).add(new Vector(1, 1, 1))
        v.setBlock(p.add(new Vector(16, 16, 16)), 0)
      }
 -->
      v.saveObj();
    })
  </script>

  <voxel id="voxel" src="data:4xgAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAEICAAgUABoCAAgUADYCAAgoABICAAgUAC4CAAg4AAoCAAgcAB4CAAtcDABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFAA6AgAIIAAWAgAIFAAyAgAIMAAOAgAIGAAmAgAIQAAGAgAIJAAOAgAK5AwAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAPgIACBgAGgIACBQANgIACCgAEgIACBQALgIACDgACgIACCAAFgIACuAMAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAEICAAgQAB4CAAgUADYCAAgoABICAAgUAC4CAAg4AAoCAAgcAB4CAArcDABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABGAgAICAAiAgAIFAA6AgAIIAAWAgAIFAAyAgAIMAAOAgAIGAAmAgAK2AwAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAOgIACCAAFgIACBQAMgIACDAADgIACBgAJgIACEAABgIACpQMAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAEYCAAgIACICAAgUADoCAAggABYCAAgUADICAAgwAA4CAAgYACYCAArYDABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABCAgAIEAAeAgAIFAA2AgAIKAASAgAIFAAuAgAIOAAKAgAIHAAeAgAK3AwAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAPgIACBgAGgIACBQANgIACCgAEgIACBQALgIACDgACgIACCAAFgIACuAMAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUADoCAAggABYCAAgUADICAAgwAA4CAAgYACYCAAhAAAYCAAgkAA4CAArkDABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABCAgAIFAAaAgAIFAA2AgAIKAASAgAIFAAuAgAIOAAKAgAIHAAeAgALXAwAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAOgIACCAAFgIACBQAMgIACDAADgIACBgAJgIACEAABgIACCQADgIAC2QMAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAEICAAgQAB4CAAgUADYCAAgoABICAAgUAC4CAAg4AAoCAAgcAB4CAAvcDABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFAA2AgAIJAAWAgAIFAAyAgAIMAAOAgAIGAAmAgAIQAAGAgAIJAAOAgAL5AwAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAQgIACBAAHgIACBQANgIACCgAEgIACBQALgIACDgACgIACBwAHgIAClwQAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAD4CAAgYABoCAAgUADYCAAgsAA4CAAgUAC4CAAg8AAYCAAggABYCAApgEABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFAA6AgAIIAAWAgAIFAAyAgAIMAAOAgAIGAAmAgAIQAAGAgAIJAAOAgAKZBAAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAOgIACCAAFgIACBQAMgIACDAADgIACBgAJgIACEAABgIACCgABgIACmgQAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUADoCAAggABYCAAgUADICAAgwAA4CAAgYACYCAAhAAAYCAAgoAAYCAApoEABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFAA6AgAIIAAWAgAIFAAyAgAIMAAOAgAIGAAmAgAIQAAGAgAIJAAOAgAKZBAAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAPgIACBgAGgIACBQANgIACCwADgIACBgAJgIACEAABgIACCAAFgIACmAQAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAEICAAgQAB4CAAgUADYCAAgoABICAAgUAC4CAAg4AAoCAAgcAB4CAApcEABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFAA6AgAIIAAWAgAIFAAyAgAIMAAOAgAIGAAmAgAIQAAGAgAIJAAOAgAL5AwAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAPgIACBgAGgIACBQANgIACCgAEgIACBQALgIACDgACgIACBwAHgIAC9wMAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUAG4CAAgUADoCAAggABYCAAgUADICAAgwAA4CAAgYACYCAAhAAAYCAAgkAA4CAAtkDABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFABuAgAIFAA+AgAIGAAaAgAIFAA2AgAIKAASAgAIFAAuAgAIOAAKAgAIHAAeAgALXAwAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAbgIACBQAOgIACCAAFgIACBQAMgIACDAADgIACBgAJgIACEAABgIACCgABgIAC1xIA" position="0 0.5 0" />

</scene>
